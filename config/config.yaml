# ==============================================================================
# 智能座舱助手配置文件
# Cockpit Assistant Configuration
# ==============================================================================

# ------------------------------------------------------------------------------
# 模型配置
# ------------------------------------------------------------------------------
model:
  # 模型文件路径
  path: "models/qwen2.5-7b-instruct-q4_k_m.gguf"
  
  # 上下文长度
  n_ctx: 4096
  
  # 批处理大小
  n_batch: 512
  
  # GPU层数 (-1 表示全部加载到GPU)
  n_gpu_layers: 35
  
  # CPU线程数 (0 表示自动)
  n_threads: 0
  
  # 使用内存映射
  use_mmap: true
  
  # 锁定内存 (需要root权限)
  use_mlock: false

# ------------------------------------------------------------------------------
# 推理配置
# ------------------------------------------------------------------------------
inference:
  # 温度 (0.0-2.0, 越高越随机)
  temperature: 0.7
  
  # Top-P采样
  top_p: 0.9
  
  # Top-K采样
  top_k: 40
  
  # 最大生成token数
  max_tokens: 512
  
  # 重复惩罚
  repeat_penalty: 1.1
  
  # 停止序列
  stop_sequences:
    - "<|im_end|>"
    - "<|endoftext|>"
    - "</s>"

# ------------------------------------------------------------------------------
# 语音配置
# ------------------------------------------------------------------------------
voice:
  # ASR (语音识别)
  asr:
    # Whisper模型大小: tiny, base, small, medium, large
    model_size: "small"
    
    # 运行设备: cuda, cpu
    device: "cuda"
    
    # 计算精度: float16, int8
    compute_type: "float16"
    
    # 语言
    language: "zh"
    
    # Beam搜索大小
    beam_size: 5
  
  # TTS (语音合成)
  tts:
    # 语音
    # 可选: zh-CN-XiaoxiaoNeural, zh-CN-XiaoyiNeural, 
    #       zh-CN-YunjianNeural, zh-CN-YunxiNeural
    voice: "zh-CN-XiaoxiaoNeural"
    
    # 语速 ("+0%" 表示正常)
    rate: "+0%"
    
    # 音量
    volume: "+0%"
    
    # 音调
    pitch: "+0Hz"
  
  # 唤醒词
  wake_word: "小智"
  
  # VAD (语音活动检测)
  vad:
    # 激进程度 (0-3)
    aggressiveness: 2
    
    # 静音超时 (秒)
    silence_timeout: 2.0

# ------------------------------------------------------------------------------
# 车辆控制配置
# ------------------------------------------------------------------------------
vehicle:
  # 默认空调温度
  default_ac_temperature: 24
  
  # 默认风量
  default_fan_speed: 3
  
  # 默认音量
  default_volume: 50
  
  # 安全检查
  safety:
    # 行驶中禁用的功能
    disabled_while_driving:
      - "control_seat"
      - "watch_video"
    
    # 最高允许温度
    max_ac_temperature: 30
    
    # 最低允许温度
    min_ac_temperature: 16

# ------------------------------------------------------------------------------
# Web服务配置
# ------------------------------------------------------------------------------
web:
  # 服务器地址
  host: "0.0.0.0"
  
  # 服务器端口
  port: 8000
  
  # 是否启用SSL
  ssl: false
  
  # SSL证书路径 (如果启用SSL)
  ssl_cert: ""
  ssl_key: ""

# ------------------------------------------------------------------------------
# 日志配置
# ------------------------------------------------------------------------------
logging:
  # 日志级别: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  
  # 日志格式
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  
  # 日志文件 (为空则只输出到控制台)
  file: ""
  
  # 最大文件大小 (MB)
  max_size: 10
  
  # 保留文件数
  backup_count: 5
